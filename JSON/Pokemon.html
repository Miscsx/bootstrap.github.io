<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>JSON</title>

    <!-- CSS ja bootstrap linkit-->
    <link rel="stylesheet" href="Style.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <!-- responsiivinen navigaatio -->
    <nav class="navbar">
        <ul class="nav-list">
            <li><a href="index.html">Tehtävä 1 OSA I</a></li>
            <li><a href="toteutus.html">Tehtävä 1 OSA II</a></li>
            <li><a href="Pokemon.html">Tehtävä 2 OSA I</a></li>
            <li><a href="eevee.html">Tehtävä 2 Osa II</a></li>
            <li><a href="saa.html">Tehtävä 3</a></li>
        </ul>
    </nav>

    
<h1>Pokemon haku</h1>

<p>
    <input type="text" id="pokemonName" placeholder="Enter Pokemon name">
    <button onclick="poke()">Hae</button><br>

    <div id="nimi">Kirjoita laatikkoon Pokemonin nimi</div>
    <p id="kuva2"></p>
    <p id="vastaus"></p>
</p>

<h2>Pokemonien nimiä</h2>
<p>
  Jos et muista Pokemoneja ulkoa, tässä on esimerkkejä<br>
      Mew<br> 
      Eevee<br> 
      Bulbasaur<br> 
      Ivysaur<br> 
      Venusaur<br
</p>

<script>

function poke() {

    // tallennetaan hakukentän nimi kahteen muotoon:
    const pokeName = document.getElementById("pokemonName").value.toLowerCase();
    let name = document.getElementById("pokemonName").value;

    fetch(`https://pokeapi.co/api/v2/pokemon/${pokeName}`)

        // Muunnetaan vastaus JSON-muotoon
        .then(function (response) {
            return response.json();
        })

        // Käsitellään JSON ja kutsutaan pokekuva-funktiota
        .then(function (responseJson) {
            pokekuva(responseJson, name);
        })

        // Napataan virheet (esim. väärä nimi)
        .catch(function (error) {
            document.getElementById("vastaus").innerHTML =
                "<p>Tietoa ei pystytä hakemaan.</p>";
        });
}

function pokekuva(obj, name) {

    // Poimitaan Pokemonin etukuva API:n datasta
    let pokeurl = obj.sprites.front_default;

    // Päivitetään kuva ja nimi sivulle
    document.getElementById("kuva2").innerHTML =
        "<img src='" + pokeurl + "'>";

    document.getElementById("nimi").innerHTML =
        "<b>" + name + "</b>";

    // tyhjennetään hakukenttä
    document.getElementById("pokemonName").value = "";
}

</script>
</body>

</html>


